name: Build Desktop App

on:
  workflow_dispatch:

env:
  SOURCE_DIR: ${{ github.workspace }}
  QT_VERSION: 6.4.2
  BUILD_TYPE: Release

jobs:
  build-desktop-application-windows:
   name: Build Desktop Application Windows
   runs-on: windows-latest
   
   steps:
    - name: Checkout Repository
      uses: actions/checkout@v3
    
    - name: Get all tags for correct version determination
      working-directory: ${{ github.workspace }}
      run: |
         git fetch $(git rev-parse --symbolic-full-name --abbrev-ref @{upstream} | sed 's!/! !') --tags -f
    
#     - name: Install Qt
#       uses: jurplel/install-qt-action@v3
#       with:
#         version: ${{ env.QT_VERSION }}
#         host: 'windows'
#         target: 'desktop'
#         arch: 'win64_msvc2019_64'
#         cache: true
#         cache-key-prefix: install-qt-${{env.QT_VERSION}}-action
        
#     - name: Configure CMake
#       run: cmake ${{github.workspace}}/gui -B ${{github.workspace}}/build -DGITHUB_WORKFLOW=True -DEMBED_DATA=True
      
#     - name: Build
#       run: cmake --build ${{github.workspace}}/build --config ${{env.BUILD_TYPE}} -j
      
#     - name: Call windeployqt
#       working-directory: ${{github.workspace}}/build/Release
#       run: windeployqt wwhd_rando.exe --pdb --release --no-translations --no-system-d3d-compiler --no-opengl-sw
    
#     - name: Populate artifact folders
#       run: |
#         mkdir artifacts
#         cp ${{github.workspace}}/build/Release/* -r ${{github.workspace}}/artifacts
      
#     - name: Save Artifact
#       uses: actions/upload-artifact@v3
#       with:
#         name: wwhd_rando_windows
#         path: artifacts
